{% extends "books/base.html" %}

{% block title %}All Books{% endblock %}
{% block page_heading %}All Books{% endblock %}

{% block actions %} 
{% if request.user.is_authenticated %}
    <a class="btn btn-primary" href="{% url 'books:create' %}">+ Add Book</a>
{% endif %}
{% endblock %}

{% block content %}

{% if not user.is_authenticated%}
    <div class="auth-cta surface">
        <div class = "auth-cta-actions">
            <a class="btn btn-primary" href="{% url 'login' %}">Login</a>
            <a class="btn btn-ghost" href="{% url 'register' %}">Register</a>
        </div>    
        <p class="auth-cta-note">
            To create, edit, or delete books, please log in or register for an account. This will allow you to fully engage with the content and contribute to the community.
        </p>
    </div>
{% endif %}

    <section class="surface card-stack">
        {% if books %}
            <ul class="book-grid">
                {% for book in books %}
                    <li class="book-card">
                        <div>
                            <h2 class="book-title">{{ book.title }}</h2>
                            <p class="book-author">{{ book.author }}</p>
                            <p class="book-price">{{ book.price }}</p>
                        </div>
                        {% if request.user.is_authenticated %}
                            <div class="card-actions">
                                <a class="btn btn-secondary" href="{% url 'books:edit' book.pk %}">Edit</a>
                                <a class="btn btn-danger-outline" href="{% url 'books:delete' book.pk %}">Delete</a>
                            </div>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="empty-state">
                <h2>No books yet</h2>
                <p>Add your first book to start building the collection.</p>
            </div>
        {% endif %}
    </section>
{% endblock %}
